---
title: "Course Project - Regression Models"
author: "attila.toth86"
date: "21st Oct 2015"
output: html_document
---

This document is created for "Course Project" assignment in the framework of Regression Models course (part of Data Science Specialization by Johns Hopkins University Bloomberg School of Public Health on Coursera).

# Introduction

Working for *Motor Trend*, a magazine about the automobile industry. Looking at a data set of a collection of cars, they are interested in exploring the relationship between a set of variables and miles per gallon. They are particularly interested in the following two questions:

 - Is an automatic or manual transmission better for MPG?
 - Quantify the MPG difference between automatic and manual transmissions?

# Executive Summary

To be detailed...

# Dataset

Data to be analysed for this exercise is a built-in object, `mtcars`, coming along with any R distribution. Let's take a look at it:
 
```{r}
str(mtcars)
```

From R documentation (`?mtcars`) the following information can be obtained about the dataset:

|Variable|Description|
|--------|-----------|
|mpg|Miles/(US) gallon|
|cyl|Number of cylinders|
|disp|Displacement (cu.in.)|
|hp|Gross horsepower|
|drat|Rear axle ratio|
|wt|Weight (lb/1000)|
|qsec|1/4 mile time|
|vs|V/S|
|am|Transmission (0 = automatic, 1 = manual)|
|gear|Number of forward gears|
|carb|Number of carburetors|

# Exploratory Data Analyses

First, I load all the necessary R packages for further analyses:

```{r}
library(ggplot2)
library(reshape)
```

Let's take a look at the outcome variable (miles per gallon)

```{r}
summary(mtcars$mpg)
table(mtcars$am)
am_means <- data.frame(value=rbind(totalmean=mean(mtcars$mpg), automean=mean(mtcars[mtcars$am==1,]$mpg), manmean=mean(mtcars[mtcars$am==0,]$mpg)))
ggplot(mtcars, aes(x=mpg)) + 
  geom_density(fill="black", alpha=0.3) +
  geom_density(aes(fill=factor(am)), alpha=0.6) + 
  geom_vline(xintercept=am_means[,1], colour="red", lty=am_means[,1], lwd=1)
ggplot(mtcars, aes(y=mpg, x=factor(am))) + geom_boxplot()

mtcars_norm <- mtcars
mtcars_norm$cyl <- (mtcars$cyl-mean(mtcars$cyl))/sd(mtcars$cyl)
mtcars_norm$disp <- (mtcars$disp-mean(mtcars$disp))/sd(mtcars$disp)
mtcars_norm$hp <- (mtcars$hp-mean(mtcars$hp))/sd(mtcars$hp)
mtcars_norm$drat <- (mtcars$drat-mean(mtcars$drat))/sd(mtcars$drat)
mtcars_norm$wt <- (mtcars$wt-mean(mtcars$wt))/sd(mtcars$wt)
mtcars_norm$qsec <- (mtcars$qsec-mean(mtcars$qsec))/sd(mtcars$qsec)
mtcars_norm$vs <- (mtcars$vs-mean(mtcars$vs))/sd(mtcars$vs)
mtcars_norm$am <- (mtcars$am-mean(mtcars$am))/sd(mtcars$am)
mtcars_norm$gear <- (mtcars$gear-mean(mtcars$gear))/sd(mtcars$gear)
mtcars_norm$carb <- (mtcars$carb-mean(mtcars$carb))/sd(mtcars$carb)

mtcars_z_melted <- melt(mtcars_norm, id="mpg")

mtcars_melted <- melt(mtcars, id="mpg")

ggplot(mtcars_z_melted, aes(y=mpg, x=value)) + geom_point(position="jitter") + facet_wrap(~variable, nrow=2)



```

To be detailed...

# Model fit / model selection strategy
```{r}
null <- lm(mpg ~ 1, mtcars)
full <- lm(mpg ~ ., mtcars)
step(null, scope=list(lower=null, upper=full), direction="forward") 
step(full, data=mtcars, direction="backward") 
step(null, scope = list(upper=full), data=mtcars, direction="both")
step(full)

```


To be detailed...

